# Processing Text of Sustainability Reports
library(pdftools)
library(dplyr)
library(tidytext)
library(tm)
library(textstem)
library(topicmodels)
library(lda)
library(ldatuning)
library(ggplot2)
library(wordcloud)
library(pals)
library(SnowballC)
library(stringr)
# Initiating work directory
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/")
# Defining variables
reports <- read.csv("sustainability_reports_sgx_sti.csv")
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/Sustainability Reports or Annual Reports")
# Reading in Text
for (i in 1:nrow(reports)){
if (i == 1){
text <- pdftools::pdf_text(reports$DocumentName[i])
# Initiate the first dataframe
text_df <- tibble(page = 1:length(text), text = text)
text_df$Company <- reports$Company[i]
text_df$Year <- reports$Year[i]
}
else{
text <- pdftools::pdf_text(reports$DocumentName[i])
# Create a temporary dataframe
text_df_temp <- tibble(page = 1:length(text), text = text)
text_df_temp$Company <- reports$Company[i]
text_df_temp$Year <- reports$Year[i]
# Append to the original dataframe
text_df <- rbind(text_df,text_df_temp)
}
}
# Summarising Results
number_pages <- text_df %>%
group_by(Company, Year) %>%
count()
# Processing Text of Sustainability Reports
library(pdftools)
library(dplyr)
library(tidytext)
library(tm)
library(textstem)
library(topicmodels)
library(lda)
library(ldatuning)
library(ggplot2)
library(wordcloud)
library(pals)
library(SnowballC)
library(stringr)
# Initiating work directory
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/")
# Defining variables
reports <- read.csv("sustainability_reports_sgx_sti.csv")
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/Sustainability Reports or Annual Reports")
# Reading in Text
for (i in 1:nrow(reports)){
if (i == 1){
text <- pdftools::pdf_text(reports$DocumentName[i])
# Initiate the first dataframe
text_df <- tibble(page = 1:length(text), text = text)
text_df$Company <- reports$Company[i]
text_df$Year <- reports$Year[i]
}
else{
text <- pdftools::pdf_text(reports$DocumentName[i])
# Create a temporary dataframe
text_df_temp <- tibble(page = 1:length(text), text = text)
text_df_temp$Company <- reports$Company[i]
text_df_temp$Year <- reports$Year[i]
# Append to the original dataframe
text_df <- rbind(text_df,text_df_temp)
}
}
# Summarising Results
number_pages <- text_df %>%
group_by(Company, Year) %>%
count()
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/")
write.csv(number_pages, "number_of_pages.csv", row.names=F)
# Initiating work directory
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/")
# Defining variables
reports <- read.csv("sustainability_reports_sgx_sti.csv")
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/Sustainability Reports or Annual Reports")
# Reading in Text
for (i in 1:nrow(reports)){
if (i == 1){
text <- pdftools::pdf_text(reports$DocumentName[i])
# Initiate the first dataframe
text_df <- tibble(page = 1:length(text), text = text)
text_df$Company <- reports$Company[i]
text_df$Year <- reports$Year[i]
}
else{
text <- pdftools::pdf_text(reports$DocumentName[i])
# Create a temporary dataframe
text_df_temp <- tibble(page = 1:length(text), text = text)
text_df_temp$Company <- reports$Company[i]
text_df_temp$Year <- reports$Year[i]
# Append to the original dataframe
text_df <- rbind(text_df,text_df_temp)
}
}
# Summarising Results
number_pages <- text_df %>%
group_by(Company, Year) %>%
count()
setwd("C:/Users/Jeremy Chia/Documents/GitHub/NLP-SustainabilityReports-FinancialPerformance/")
write.csv(number_pages, "number_of_pages.csv", row.names=F)
number_pages %>%
ggplot(aes(x=Year,y=n,fill=Company)) +
geom_boxplot()
number_pages %>%
ggplot(aes(x=Year,y=n,fill=Company)) +
geom_boxplot() +
scale_fill_viridis(discrete = TRUE, alpha=0.6) +
geom_jitter(color="black", size=0.4, alpha=0.9) +
theme_minimal()
library(viridis)
number_pages %>%
ggplot(aes(x=Year,y=n,fill=Company)) +
geom_boxplot() +
scale_fill_viridis(discrete = TRUE, alpha=0.6) +
geom_jitter(color="black", size=0.4, alpha=0.9) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot() +
scale_fill_viridis(discrete = TRUE, alpha=0.6) +
geom_jitter(color="black", size=0.4, alpha=0.9) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot() +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n,fill=Company)) +
geom_boxplot() +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n,fill=Year)) +
geom_boxplot() +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot() +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_point() +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(alpha = 0.4) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(alpha = 0.4, aes(color = Year)) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(alpha = 0.2, aes(color = Year)) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(width = 0.1, alpha = 0.5, aes(color = Year)) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(width = 0.2, alpha = 0.5, aes(color = Year)) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(width = 0.1, alpha = 0.5, aes(color = Year)) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal()
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot() +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal()
number_pages %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal()
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal()
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
xlab("Number of Pages")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year, color=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year, color=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
theme(legend.position="none")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year, color=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
theme(legend.position="none") +
scale_fill_brewer(palette="Blues")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year)) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
theme(legend.position="none") +
scale_fill_brewer(palette="Blues")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year), alpha = 0.2) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
theme(legend.position="none") +
scale_fill_brewer(palette="Blues")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year), fill = "grey", alpha = 0.2) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
theme(legend.position="none") +
scale_fill_brewer(palette="Blues")
number_pages %>%
mutate(
Year = as.character(Year)
) %>%
ggplot(aes(x=Year,y=n)) +
geom_boxplot(aes(x=Year), fill = "grey", alpha = 0.2) +
geom_jitter(width = 0.1, alpha = 0.5) +
theme_minimal() +
ggtitle("Number of Pages by Year") +
ylab("Number of Pages") +
xlab("Disclosure for Year Ended In")
